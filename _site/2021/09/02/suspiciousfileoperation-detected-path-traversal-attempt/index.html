<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Django: SuspiciousFileOperation: Detected path traversal attempt | tait.tech</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Tait Hoyem">
    <meta name="keywords" content="">
    <meta name="description" content=""><link rel="stylesheet" href="/assets/css/highlight.css">
    
  </head>
  <body>
    <div id="wrapper">
      <header>
	<h1>tait.tech</h1>

        <nav>
	
	<a href="/" class="nav-link"  >Home</a>
	
	<a href="/blog/" class="nav-link"  >Blog</a>
	
	<a href="/ideas/" class="nav-link"  >Ideas</a>
	
	<a href="/links/" class="nav-link"  >Links</a>
	
	<a href="https://github.com/TTWNO/" class="nav-link"   target="_blank" rel="noopener noreferrer" >Github</a>
	
</nav>

      </header>
      <main>
        <article>
  <header>
    <h1 class="post-title">Django: SuspiciousFileOperation: Detected path traversal attempt</h1>
    <time datetime="21-09-02" class="post-date">Thursday, September 02 2021</time>
  </header>
  <hr>

  <p>When trying to add a locally stored file to a Django model recently, I had this issue.
Believe it or not, this is a good thing!</p>

<p>Django is build to take the security aspects of a system and sort of hide them behind a few onion layers of API calls and security middleware.
This is good for your average developer.
It stops them from making stupid mistakes like not using CSRF in secure forms, the allowing of insecure passwords, dangerous passing of user values into a document, et cetera.
That said, sometimes when you are doing something, and even if it seems relatively safe, Django will flag something you do as suspicious, halting development and wasting time.</p>

<p>So that said, hereâ€™s why the issue happened, why this is a good thing, and how to get around it.</p>

<h2 id="why-django-is-a-lifesaver">Why Django is a lifesaver!</h2>

<p>Django, in an effort to help keep your application secure, does not want to access files with an absolute path.
This is to stop what is known as a <a href="https://en.wikipedia.org/wiki/Directory_traversal_attack">directory traversal attack</a>.
So when you try to access something by using your environment variables, i.e. <code class="language-plaintext highlighter-rouge">os.environ["PWD"]</code>,
you may find that Django will give you errors if you try to pass this path into one of their Django, in an effort to help keep your application secure, does not want to access files with an absolute path.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># django's files are just wrappers around python's
</span><span class="kn">from</span> <span class="nn">django.core.files</span> <span class="kn">import</span> <span class="n">File</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="s">"PWD"</span><span class="p">]</span> <span class="o">+</span> <span class="s">"path1/file.pdf"</span><span class="p">))</span>
</code></pre></div></div>

<p>This will give you a nasty error:</p>

</article>

      </main>
      <hr>
      <footer>
        This page will be mirrored on <a href="https://beta.tait.tech/2021/09/02/suspiciousfileoperation-detected-path-traversal-attempt/">beta.tait.tech</a>.

      </footer>
    </div>
  </body>
</html>
